<Window x:Class="MVVM_Base.View.viewEntry"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        xmlns:local="clr-namespace:MVVM_Base.ViewModel"
        Title="Entry"
        Height="850" Width="1000"
        WindowStyle="None"
        AllowsTransparency="False"
        Background="Transparent"
        Loaded="Window_Loaded"
        StateChanged="Window_StateChanged"
        LocationChanged="Window_LocationChanged">
    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="35"
            CornerRadius="5"
            ResizeBorderThickness="5"
            GlassFrameThickness="0"
            UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Border CornerRadius="5" BorderThickness="1" BorderBrush="Gray">
        <DockPanel>
            <!-- カスタムタイトルバー -->
            <Grid Height="35" 
                  DockPanel.Dock="Top" 
                  MouseLeftButtonDown="TitleBar_MouseLeftButtonDown"
                  SnapsToDevicePixels="True">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" 
                                         EndPoint="1,0">
                        <GradientStop x:Name="TitleBarGradientStop1" 
                                      Color="{DynamicResource TitleBarAnimFrom1}" 
                                      Offset="0"/>
                        <GradientStop x:Name="TitleBarGradientStop2" 
                                      Color="{DynamicResource TitleBarAnimFrom2}"
                                      Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>
                <TextBlock 
                    Grid.Column="0"
                    Text="MVVM_Base" 
                    VerticalAlignment="Center" 
                    Margin="10" Foreground="White" 
                    FontSize="16"/>
                <Border 
                    Grid.Column="1"
                    Width="60" 
                    Height="30" 
                    CornerRadius="15" 
                    Background="#444" 
                    HorizontalAlignment="Right" 
                    Margin="0 0 10 0">
                    <Canvas Width="60" 
                            Height="30" 
                            Background="Transparent">
                        <Button x:Name="LanguageToggleButton" 
                                Style="{StaticResource SlideLanguageTheme}" 
                                Command="{Binding ChangeLanguageCommand}" 
                                Canvas.Left="0" 
                                Canvas.Top="0"/>
                    </Canvas>
                </Border>
                <Border 
                    Grid.Column="2"
                    Width="60" 
                    Height="30" 
                    CornerRadius="15" 
                    Background="#444" 
                    HorizontalAlignment="Right" 
                    Margin="0 0 10 0">
                    <Canvas Width="60" 
                            Height="30" 
                            Background="Transparent">
                        <Button x:Name="ThemeToggleButton" 
                                Style="{StaticResource SlideColorTheme}" 
                                Command="{Binding ChangeColorThemeCommand}" 
                                Canvas.Left="0" 
                                Canvas.Top="0"/>
                    </Canvas>
                </Border>
            </Grid>

            <!-- メイン領域 -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 左ナビ -->
                <Grid Grid.Column="0" 
                      Background="{DynamicResource LeftWindowColor1Brush}" 
                      MouseLeftButtonDown="Area_MouseLeftButtonDown">
                    <!-- 左ナビ背景 -->
                    <Grid Grid.Column="0" 
                          Background="{DynamicResource LeftWindowColor1Brush}" 
                          MouseLeftButtonDown="Area_MouseLeftButtonDown">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <!-- 上ボタン群 -->
                            <RowDefinition Height="Auto"/>
                            <!-- End ボタン -->
                        </Grid.RowDefinitions>

                        <!-- 上ボタン群 -->
                        <StackPanel Grid.Row="0">
                            <ToggleButton 
                                PreviewMouseLeftButtonDown="NavToggleButton_Click"
                                Checked="NavToggleButton_Check"
                                Style="{StaticResource menuToggleButton}"
                                IsChecked="{Binding IsMainSelected}" 
                                IsEnabled="{Binding CanTransit}"
                                Command="{Binding ShowViewCommand}"
                                CommandParameter="{x:Static local:ViewType.Main}" >
                                <StackPanel Orientation="Horizontal">
                                    <fa:IconImage Icon="Home"
                                                  Style="{StaticResource menuToggleButtonIcon}" />
                                    <TextBlock Text="{DynamicResource EntryWord}" 
                                               Style="{StaticResource menuToggleButtonText}"/>
                                </StackPanel>
                            </ToggleButton>

                            <ToggleButton 
                                PreviewMouseLeftButtonDown="NavToggleButton_Click" 
                                Checked="NavToggleButton_Check"
                                Style="{StaticResource menuToggleButton}" 
                                IsChecked="{Binding IsLinearViewSelected}"
                                IsEnabled="{Binding CanTransit}"
                                Command="{Binding ShowViewCommand}"
                                CommandParameter="{x:Static local:ViewType.LinearView}" >
                                <StackPanel Orientation="Horizontal">
                                    <fa:IconImage Icon="LineChart" 
                                                  Style="{StaticResource menuToggleButtonIcon}" />
                                    <TextBlock Text="{DynamicResource LinearWord}" 
                                               Style="{StaticResource menuToggleButtonText}"/>
                                </StackPanel>
                            </ToggleButton>

                            <ToggleButton 
                                PreviewMouseLeftButtonDown="NavToggleButton_Click"
                                Checked="NavToggleButton_Check"
                                Style="{StaticResource menuToggleButton}"
                                IsChecked="{Binding IsBalwSelected}" 
                                IsEnabled="{Binding CanTransit}"
                                Command="{Binding ShowViewCommand}"
                                CommandParameter="{x:Static local:ViewType.Balw}" >
                                <StackPanel Orientation="Horizontal">
                                    <fa:IconImage Icon="EnvelopeOpenText" 
                                                  Style="{StaticResource menuToggleButtonIcon}" />
                                    <TextBlock Text="{DynamicResource BalwWord}" 
                                               Style="{StaticResource menuToggleButtonText}"/>
                                </StackPanel>
                            </ToggleButton>
                        </StackPanel>

                        <!-- Endボタン -->
                        <Border Grid.Row="1"
                                Width="{Binding BtnEndWidth, RelativeSource={RelativeSource AncestorType=Window}}"
                                Height="{Binding BtnEndHeight, RelativeSource={RelativeSource AncestorType=Window}}"
                                CornerRadius="18" 
                                Background="#444" 
                                VerticalAlignment="Bottom"
                                Margin="0,0,0,10">
                            <Canvas Width="{Binding BtnEndWidth, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Height="{Binding BtnEndHeight, RelativeSource={RelativeSource AncestorType=Window}}" 
                                    Background="Transparent">
                                <Thumb Style="{StaticResource SlideThumb}" 
                                       DragDelta="SlideThumb_DragDelta" 
                                       DragCompleted="SlideThumb_DragCompleted"/>
                            </Canvas>
                        </Border>
                    </Grid>
                </Grid>

                <!-- 右画面 -->
                <Grid Grid.Column="1" 
                      Background="{DynamicResource LeftWindowColor2Brush}" 
                      PreviewMouseLeftButtonDown="Area_MouseLeftButtonDown">

                    <!-- UserControl 表示領域 -->
                    <ContentControl Content="{Binding CurrentView}" 
                                    Background="Transparent"/>

                    <!-- 右画面クリックエフェクト Canvas -->
                    <Canvas x:Name="EffectCanvas" 
                            Background="Transparent" 
                            IsHitTestVisible="False"
                            Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Grid}}"
                            Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Grid}}"/>
                    <Canvas x:Name="EffectCanvas_tb" 
                            Background="Transparent" 
                            IsHitTestVisible="False"
                            Width="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Grid}}"
                            Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Grid}}"/>
                </Grid>
            </Grid>
        </DockPanel>
    </Border>
</Window>
